
Getting started
=====================

We are happy that you are interested in Earth Observation Data analysis and Mapping.

The Earth Observation to Mapping process is going through the following main stages:

* EO data access (e.g. satellite or aerial imagery service)
* EO data processing and analysis (here comes `Mapflow <https://mapflow.ai>`_ |:boom:|)
* GIS – check and edit results to use them in you application

Mapflow is powered by the engine that enables and operates data processing pipelines (we call **"flows"**).
Using Mapflow you run your flows and get progress at every stage - as simple as that.


Mapflow Web UI
--------------

How to run your flow
^^^^^^^^^^^^^^^^^^^^

Let's look at each step you need to proceed to define your data processing flow: 

.. figure:: _static/ui_flow_basic.png
   :name: UI Mapflow – run flow
   :align: center
   :width: 15cm


1.1. Select data source - at this step you define the **geographic area** and the **satellite/aerial image** you want to extract features from.

.. HINT::
   Try GeoJSON - it's the most popular format for geographic object to display them on web maps. To define area on the map, you either draw a rectangle or drop your polygon coordinates in GeoJSON file.
   In addition to coordinates in GeoJSON you may see the **properties** of the objects that typically refer to the attributes in GIS terminology. 

GeoJSON sample:

.. code:: json

    {
      "type": "Polygon",
      "coordinates": [
        [
          [
            37.490057513654946,
            55.923029653520395
          ],
          [
            37.490057513654946,
            55.949815087874605
          ],
          [
            37.54308202484029,
            55.949815087874605
          ],
          [
            37.54308202484029,
            55.923029653520395
          ],
          [
            37.490057513654946,
            55.923029653520395
          ]
        ]
      ]
    }


:download:`Download GeoJSON <_static/_downloads/buildings_aoi.geojson>`


1.2. Mapflow is connected to global data sources including commercial data providers, however it's possible to upload your own georeferenced images.

 .. IMPORTANT:: 
  * Currently the only one source by default is selected (**Mapbox Satellite**) using Mapflow Web App. See **API DOC** if you want to define your own input data source or upload GeoTIFF image


.. figure:: _static/ui_map_select_source.png
   :name: UI Mapflow – define AOI
   :align: center
   :width: 20cm


2. Select one of the **Mapping models** (:doc:`See Models description <pipelines>`)

2.1. Select the additional options available for the Model (e.g. "Typology" and "Heights" for the "Building" model)

 .. IMPORTANT::
    Building Heights option is limited by the minumum area of the processing (~70 sq.km)


3. Run the processing and take a break |:coffee:| |:slight_smile:|

 .. CAUTION::
    After you choose the Mapping model and the processing params – you will see the total score of your processing cost


Working with results
^^^^^^^^^^^^^^^^^^^^

The main stages of the processing are displayed and all your results are saved in the "Jobs History".

After you're done with the processing you can preview generated features in interactive map or download them in vector (GeoJSON).

.. figure:: _static/preview_button.png
   :name: Preview results
   :align: center
   :width: 10cm


#. An interactive map (View on the map) shows you the features mask placed over the input image. This is the fastest way to preview the output results.

.. figure:: _static/preview_map.png
   :name: Preview map
   :align: center
   :width: 20cm

#. Download and check **GeoJSON** - a geodata format that's natively supported by Web-Map tools like **Leaflet** (https://leafletjs.com/) or GIS apps like **QGIS** (https://qgis.org/).

You are able to analyse it, modify, publish and do what you want.

#. This option allows to open the GeoJSON in external viewer, you get the direct link from Mapflow - `geosjon.io <http://geojson.io/#data=data:application/json,%7B%22type%22%3A%20%22Polygon%22%2C%20%22coordinates%22%3A%20%5B%20%5B%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%20%5D%20%5D%7D>`_ 

This is another way to preview results and save them in preferable formats (CSV, KML, GeoJSON, TopoJSON, WKT, Shapefile). Pretty cool! |:slight_smile:|

.. figure:: _static/geojson.io.png
   :name: Preview map
   :align: center
   :width: 20cm


Working with API
^^^^^^^^^^^^^^^^

Mapflow platform provides a Rest API to query for running processings and getting results.
If you are developing application and want to use API - check :doc:`../docs_api/processing_api` and contact us at help@geoalert.io

