{# Language selector dropdown for switching between available languages #}
<div class="language-selector">
  <label for="language-select">{{ _('Language') }}:</label>
  <select id="language-select" onchange="changeLanguage(this.value)">
    {% for lang_name, lang_code in languages %}
      <option value="{{ lang_code }}" {% if lang_code == current_language %}selected{% endif %}>
        {{ lang_name }}
      </option>
    {% endfor %}
  </select>
</div>

<script>
function changeLanguage(lang) {
  var path = window.location.pathname;
  var currentLang = '{{ current_language }}';
  
  // Handle both root path and specific pages
  if (path.includes('/' + currentLang + '/')) {
    // Replace language code in URL
    var newPath = path.replace('/' + currentLang + '/', '/' + lang + '/');
  } else if (path === '/' || path === '/index.html') {
    // Redirect from root to language-specific page
    var newPath = '/' + lang + '/index.html';
  } else {
    // Handle case where no language code in path
    var newPath = '/' + lang + path;
  }
  
  window.location.href = newPath;
}
</script>
